<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="styles.css">
</head>



<body>

<table id="main">
    <tr>
        <td>
            <input type="text" id="idInstance" placeholder="idInstance"><br>
            <input type="text" id="APITokenInstance" placeholder="APITokenInstance"><br>
            <button onclick="getSettings()">getSettings</button><br>
            <button onclick="getStateInstance()">getStateInstance</button><br>



        </td>
        <td rowspan="3" id="outputCol">
            <h1>API reply:</h1><br>
            <textarea id="output" readonly></textarea><br>
        </td>
    </tr>
    <tr><td>
        <input type="text" id="messagePhone" placeholder="Phone number"><br>
        <input type="text" id="messageText" placeholder="Message text"><br>
        <button onclick="sendMessage()">sendMessage</button><br>
    </td></tr>
    <tr><td>
        <input type="text" id="filePhone" placeholder="Phone number"><br>
        <input type="text" id="fileURL" placeholder="File URL"><br>
        <button onclick="sendFile()">sendFileByURL</button><br>
    </td></tr>


</table>






            
<script>
    function getMethodURL (methodName)
    {
        var result = ("https://1103.api.green-api.com/wainstance" + document.getElementById("idInstance").value + "/" + methodName + "/" + document.getElementById("APITokenInstance").value);
        return result;
    }

    function getText (id)
    {
        return (document.getElementById(id).value);
    }

    function getSettings() 
    {
        var HTTP = new XMLHttpRequest();
        HTTP.open("GET", getMethodURL("getSettings"), false);
        HTTP.send(null);
        document.getElementById("output").value = HTTP.responseText;
    }

    function getStateInstance() 
    {
        var HTTP = new XMLHttpRequest();
        HTTP.open("GET", getMethodURL("getStateInstance"), false);
        HTTP.send(null);
        document.getElementById("output").value = HTTP.responseText;
    }

    function sendMessage()
    {
        var HTTP = new XMLHttpRequest();
        HTTP.open("POST", getMethodURL("sendMessage"), false);
        var request = "{ \"chatId\": " + '"' + getText("messagePhone") + "\", \"message\": \"" + getText("messageText") + "\"}";
        HTTP.send(request);
        document.getElementById("output").value = HTTP.responseText;

    }
    function sendFile()
    {
        var HTTP = new XMLHttpRequest();
        HTTP.open("POST", getMethodURL("sendFileByUrl"), false);
        var fileURL = getText("fileURL");
        var fileName = fileURL.split('\\')[fileURL.split('\\').length - 1];
        var request = "{ \"chatId\": " + '"' + getText("messagePhone") + "\", \"urlFile\": \"" + fileURL + "\", \"fileName\":\"" + fileName + "\" }";
        HTTP.send(request);
        document.getElementById("output").value = HTTP.responseText;
    }
</script>

<a></a>

</body>